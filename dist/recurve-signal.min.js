/*! recurve-signal.js - v0.1.2 - by Sebastien Couture 2015-03-22 */!function(a,b){"use strict";"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Signal=b():a.Signal=b()}(this,function(){"use strict";function a(){this._listeners=[]}function b(a,b,c){this._callback=a,this._context=b,this.onlyOnce=c}function c(a){return"[object Function]"===Object.prototype.toString.call(a)}function d(a,b,c){var d=!1;if(!a)return d;for(var e=0;e<a.length;e++){var f=a[e];if(f.isSame(b,c)){d=!0;break}}return d}return a.prototype={on:function(a,e){if(!c(a))throw new Error("callback must exist");d(this._listeners,a,e)||this._listeners.push(new b(a,e))},once:function(a,e){if(!c(a))throw new Error("callback must exist");d(this._listeners,a,e)||this._listeners.push(new b(a,e,!0))},off:function(a,b){if(!a&&!b)return void this.clear();for(var c=this._listeners.length-1;c>=0;c--){var d,e=this._listeners[c];if(a?e.isSame(a,b)&&(d=!0):e.isSameContext(b)&&(d=!0),d&&(this._listeners.splice(c,1),a))return}},trigger:function(){if(!this._disabled)for(var a=this._listeners.length-1;a>=0;a--){var b=this._listeners[a];b.trigger(arguments),b.onlyOnce&&this._listeners.splice(a,1)}},clear:function(){this._listeners=[]},disable:function(a){void 0===a&&(a=!0),this._disabled=a}},b.prototype={isSame:function(a,b){return b?this._callback===a&&this._context===b:this._callback===a},isSameContext:function(a){return this._context===a},trigger:function(a){this._callback.apply(this._context,a)}},a});